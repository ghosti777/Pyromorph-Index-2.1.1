<script>
    function calculateScore() {
        let baseScore = 0;
        document.querySelectorAll('#indicators input:checked').forEach(el => {
            baseScore += parseFloat(el.value);
        });

        if (document.getElementById('superTrend').checked) {
            let strength = parseInt(document.getElementById('superTrendStrength').value);
            let strengthMultiplier = 1 - (0.1 * (6 - strength)); // Adjusts scaling correctly

            baseScore += (4.5 * strengthMultiplier); 

            if (document.getElementById('superTrendCounter').checked) {
                let counterPenalty = (6 - strength) * 0.4; // Weaker signals get penalized more
                baseScore -= counterPenalty;
            }
        }

        let finalScore = baseScore * parseFloat(document.getElementById('timeframe').value) * parseFloat(document.getElementById('dualCloud').value) * parseFloat(document.getElementById('atr').value);
        finalScore = Math.min(finalScore, 100);

        let randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
        let analysisText = finalScore >= 90 ? "🔥 Ultra High Conviction Trade 🔥" : finalScore >= 75 ? "✅ Strong Conviction Trade" : finalScore >= 50 ? "⚠️ Moderate Conviction Trade" : finalScore >= 30 ? "❓ Low Conviction Trade" : "🚫 No Conviction / Avoid Trade";

        document.getElementById('analysis').innerText = analysisText;
        document.getElementById('result').innerText = `Score: ${finalScore.toFixed(1)}`;
        document.getElementById('quote').innerText = `🐺 ${randomQuote}`;
    }
</script>