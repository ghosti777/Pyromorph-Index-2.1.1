<script>
    function calculateScore() {
        let baseScore = 0;
        document.querySelectorAll('#indicators input:checked').forEach(el => {
            baseScore += parseFloat(el.value);
        });

        // Liquidity Grab Adjustments
        if (document.getElementById('liqGrab').checked) {
            if (document.getElementById('liqImpulse').checked) baseScore += parseFloat(document.getElementById('liqImpulse').value);
            if (document.getElementById('liqCluster').checked) baseScore += parseFloat(document.getElementById('liqCluster').value);
            if (document.getElementById('liqChoppy').checked) baseScore += parseFloat(document.getElementById('liqChoppy').value);
            if (document.getElementById('liqVolume').checked) baseScore += parseFloat(document.getElementById('liqVolume').value);
        }

        // Supertrend AI Adjustments
        if (document.getElementById('supertrend').checked) {
            let strength = parseFloat(document.getElementById('supertrendStrength').value);
            let baseSupertrendScore = 4.5; 
            let strengthMultiplier = 0.5 + (strength / 6); // Scales from 0.5x to 1.5x
            baseScore += baseSupertrendScore * strengthMultiplier;
        }

        // Apply Multipliers
        let timeframeMultiplier = parseFloat(document.getElementById('timeframe').value);
        let dualCloudMultiplier = parseFloat(document.getElementById('dualCloud').value);
        let atrMultiplier = parseFloat(document.getElementById('atr').value);

        let finalScore = baseScore * timeframeMultiplier * dualCloudMultiplier * atrMultiplier;
        finalScore = Math.min(finalScore, 100); // Ensures max is 100

        // Generate Quote
        let randomQuote = quotes[Math.floor(Math.random() * quotes.length)];

        // Analysis Text
        let analysisText = "";
        if (finalScore >= 90) {
            analysisText = "ğŸ”¥ Ultra High Conviction Trade ğŸ”¥";
        } else if (finalScore >= 75) {
            analysisText = "âœ… Strong Conviction Trade";
        } else if (finalScore >= 50) {
            analysisText = "âš ï¸ Moderate Conviction Trade";
        } else if (finalScore >= 30) {
            analysisText = "â“ Low Conviction Trade";
        } else {
            analysisText = "ğŸš« No Conviction / Avoid Trade";
        }

        document.getElementById('analysis').innerText = analysisText;
        document.getElementById('result').innerText = `Score: ${finalScore.toFixed(1)}`;
        document.getElementById('quote').innerText = `ğŸº ${randomQuote}`;
    }
</script>